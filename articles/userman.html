<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Pikchr User Manual • pikchr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Pikchr User Manual">
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pikchr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Examples.html">Examples</a></li>
    <li><a class="dropdown-item" href="../articles/userman.html">Pikchr User Manual</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/StrategicProjects/pikchr" aria-label="Github"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">



<script src="userman_files/kePrint-0.0.1/kePrint.js"></script><link href="userman_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Pikchr User Manual</h1>
            
      

      <div class="d-none name"><code>userman.Rmd</code></div>
    </div>

    
    
<blockquote>
<p><strong>Disclaimer</strong> The text of this manual was authored by
D. Richard Hipp and is available on the official pikchr.org website. All
links have been preserved to direct users to the original site for
further reference. We extend our sincere gratitude to D. Richard Hipp
for his outstanding work in adapting the original PIC language by Brian
Kernighan into the modern pikchr tool, bringing new accessibility and
utility to diagram generation.</p>
</blockquote>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This is a guide to generating diagrams using Pikchr, pronounced
“picture.” This guide is designed to teach you to use Pikchr in a more
accessible manner than you get by reading the <a href="https://pikchr.org/home/doc/trunk/doc/grammar.md" class="external-link">grammar
specification</a>. We leave discussion of the scope and purpose of
Pikchr to a <a href="https://pikchr.org/home/doc/trunk/doc/purpose.md" class="external-link">separate
document</a>.</p>
<p>For more details and other perspectives, see the following
resources:</p>
<ul>
<li><a href="https://pikchr.org/home/doc/trunk/doc/teardown01.md" class="external-link">Step-by-step
example of writing a Pikchr document</a></li>
<li><a href="https://pikchr.org/home/uv/pic.pdf" class="external-link">The original Kernighan
paper on PIC</a></li>
<li><a href="https://pikchr.org/home/doc/trunk/doc/differences.md" class="external-link">Differences
between PIC and Pikchr</a></li>
<li><a href="https://pikchr.org/home/uv/gpic.pdf" class="external-link">ESR’s documentation on
GnuPIC</a></li>
<li><a href="https://pikchr.org/home/uv/dpic-doc.pdf" class="external-link">DPIC
documentation</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="running-pikchr-scripts">Running Pikchr Scripts <a id="running"></a><a class="anchor" aria-label="anchor" href="#running-pikchr-scripts"></a>
</h2>
<p>The design goal of Pikchr is to enable embedded line diagrams in
Markdown or other simple markup languages. The details on how to embed
Pikchr in Markdown is <a href="https://pikchr.org/home/doc/trunk/doc/usepikchr.md" class="external-link">covered
separately</a>. For the purpose of this tutorial, we will only write
pure Pikchr scripts without the surrounding markup. To experiment with
Pikchr, visit the <a href="https://pikchr.org/home/pikchrshow" class="external-link">/pikchrshow</a> page on the
website hosting this document (preferably in a separate window). Type in
the following script and press the Preview button:
<a id="firstdemo"></a></p>
<pre class="pikchr"><code>     line; box "Hello," "World!"; arrow</code></pre>
<p>If you do this right, the output should appear as:</p>
<div class="container_pikchr inline-svg unnamed-chunk-3" style="text-align:center;">
<svg style="width:260.64;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-3" viewbox="0 0 260.64 76.32" data-pikchr-date="20250321215505"><path d="M2.16,38.16L74.16,38.16" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><path d="M74.16,74.16L182.16,74.16L182.16,2.16L74.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="128.16" y="28.08" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">Hello,</text><text x="128.16" y="48.24" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">World!</text><polygon points="254.16,38.16 242.64,42.48 242.64,33.84" style="fill:rgb(0,0,0)"></polygon><path d="M182.16,38.16L248.4,38.16" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path></svg>
</div>
<p>So there you go: you’ve created and rendered your first diagram using
Pikchr! You will do well to keep that /pikchrshow screen handy, in a
separate browser window, so that you can try out scripts as you proceed
through this tutorial.</p>
</div>
<div class="section level2">
<h2 id="viewing-pikchr-script-source-code-for-this-document">Viewing Pikchr Script Source Code For This Document
<a name="viewsrc"></a><a class="anchor" aria-label="anchor" href="#viewing-pikchr-script-source-code-for-this-document"></a>
</h2>
<p>For this particular document, you can click on any of the diagrams
rendered by Pikchr and the display will convert to showing you the
original Pikchr source text. Click again to go back to seeing the
rendered diagram.</p>
<p>The click-to-change-view behavior is a property of this one
particular document and is not a general capability of Pikchr. On other
documents containing Pikchr diagrams that are generated using Fossil you
can use Ctrl-click (Option-click on Macs) to toggle the view. That is,
click on the diagram while holding down the Ctrl key or the Option key.
This is not possible if you are on a tablet or phone, since you don’t
have a Ctrl or Option key to hold down there. Other systems might not
implement the view-swapping behavior at all. This is a
platform-depending feature that is one layer above Pikchr itself.</p>
</div>
<div class="section level2">
<h2 id="about-pikchr-scripts">About Pikchr Scripts <a id="about"></a><a class="anchor" aria-label="anchor" href="#about-pikchr-scripts"></a>
</h2>
<p>Pikchr is designed to be simple. A Pikchr script is just a sequence
of Pikchr statements, separated by either new-lines or semicolons. The
“Hello, world!” example above used three statements, a “line”, a “box”,
and an “arrow”, each separated by semicolons.</p>
<p>Whitespace (other than newlines) and comments are ignored. Comments
in pikchr can be in the style of TCL, C, or C++. That is to say,
comments consist of a “<code>#</code>” or “<code>//</code>” and include
all characters up to but not including the next new-line, or all text in
between “<code>/*</code>” and the first following “<code>*/</code>”. The
example script above could be rewritten with each statement on a
separate line, and with comments describing what each statement is
doing:</p>
<pre class="pikchr"><code>    # The first component of the drawing is a line
    line
    // The second component is a box with text "Hello, World!"
    box "Hello," "World!"
    /* Finally an arrow */
    arrow</code></pre>
<p>Remember that new-lines separate statements. If you have a long
statement that needs to be split into multiple lines, escape the newline
with a backslash character and the new-line will be treated as any other
space:</p>
<pre class="pikchr"><code>    line
    box \
       "Hello," \
       "World!"
    arrow</code></pre>
<p>So, a Pikchr script is just a list of statements, but what is a
statement?</p>
</div>
<div class="section level2">
<h2 id="pikchr-statements">Pikchr Statements <a id="statements"></a><a class="anchor" aria-label="anchor" href="#pikchr-statements"></a>
</h2>
<p><em>Most</em> statements are descriptions of a single graphic object
that becomes part of the diagram. The first token of the statement is
the object class-name. The following classes are currently
supported:</p>
<div class="container_pikchr inline-svg unnamed-chunk-6" style="text-align:center;">
<svg style="width:562.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-6" viewbox="0 0 562.32 372.24" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="56.16" y="38.16" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">box</text><circle cx="200.16" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><text x="200.16" y="38.16" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">circle</text><ellipse cx="344.16" cy="38.16" rx="54" ry="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></ellipse><text x="344.16" y="38.16" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">ellipse</text><path d="M452.16,74.16L524.16,74.16A36 36 0 0 0 560.16 38.16A36 36 0 0 0 524.16 2.16L452.16,2.16A36 36 0 0 0 416.16 38.16A36 36 0 0 0 452.16 74.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="488.16" y="38.16" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">oval</text><path d="M2.16,128.16L2.16,178.56A54 10.8 0 0 0 110.16 178.56L110.16,128.16A54 10.8 0 0 0 2.16 128.16A54 10.8 0 0 0 110.16 128.16" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="56.16" y="161.46" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">cylinder</text><path d="M164.16,207.36L236.16,207.36L236.16,120.96L214.56,99.36L164.16,99.36Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><path d="M214.56,99.36L214.56,120.96L236.16,120.96" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="200.16" y="153.36" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">file</text><path d="M272.16,153.36L344.16,207.36L416.16,153.36L344.16,99.36Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="344.16" y="153.36" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">diamond</text><path d="M2.16,268.56L74.16,268.56" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="38.16" y="256.86" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">line</text><polygon points="254.16,268.56 242.64,272.88 242.64,264.24" style="fill:rgb(0,0,0)"></polygon><path d="M182.16,268.56L248.4,268.56" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="218.16" y="256.86" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">arrow</text><path d="M320.207,279.899 L 331.007,279.899 Q 341.807,279.899 352.607,261.192 Q 363.407,242.486 375.72,276.315 Q 388.033,310.144 397.883,283.081 Q 407.733,256.018 418.533,256.018 L 429.333,256.018" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="363.407" y="242.486" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">spline</text><circle cx="38.16" cy="354.96" r="2.16" style="fill:rgb(0,0,0);stroke-width:2.16;stroke:rgb(0,0,0);"></circle><text x="38.16" y="328.501" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">dot</text><path d="M182.16,354.96Q218.16,354.96 218.16,318.96" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="182.16" y="318.96" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">arc</text><text x="369.36" y="354.96" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">text</text></svg>
</div>
<p>A statement can be only the class-name and nothing else, but the
class-name is usually followed by one or more “attributes”. Attributes
are used to modify the appearance of the object, or to position the
object relative to prior objects.</p>
<p>So to revisit the <a href="#firstdemo">“Hello, World” demonstration
script above</a>, we see that that script contains three object
descriptions:</p>
<ol style="list-style-type: decimal">
<li>A “line” object with no attributes (meaning that the line is shown
with no changes to its default appearance).</li>
<li>A “box” object with two string literal attributes. The string
literal attributes cause the corresponding strings to be drawn inside
the box.</li>
<li>An “arrow” object with no attributes.</li>
</ol>
</div>
<div class="section level2">
<h2 id="layout">Layout <a id="layout"></a><a class="anchor" aria-label="anchor" href="#layout"></a>
</h2>
<p>By default, objects are stacked beside each other from left to right.
The Pikchr layout engine keeps track of the “layout direction”, which
can be one of “right”, “down”, “left”, or “up”. The layout direction
defaults to “right”, but you can change it using a statement which
consists of just the name of the new direction. So, if we insert the
“down” statement in front of our test script, like this:</p>
<pre class="pikchr"><code>    down
    line
    box  "Hello,"  "World!"
    arrow</code></pre>
<p>Then the objects are stacked moving downward:</p>
<div class="container_pikchr inline-svg unnamed-chunk-8" style="text-align:center;">
<svg style="width:112.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-8" viewbox="0 0 112.32 224.64" data-pikchr-date="20250321215505"><path d="M56.16,2.16L56.16,74.16" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><path d="M2.16,146.16L110.16,146.16L110.16,74.16L2.16,74.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="56.16" y="100.08" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">Hello,</text><text x="56.16" y="120.24" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">World!</text><polygon points="56.16,218.16 51.84,206.64 60.48,206.64" style="fill:rgb(0,0,0)"></polygon><path d="M56.16,146.16L56.16,212.4" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path></svg>
</div>
<p>Or, you can change the layout direction to “left”:</p>
<div class="container_pikchr inline-svg unnamed-chunk-9" style="text-align:center;">
<svg style="width:260.64;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-9" viewbox="0 0 260.64 76.32" data-pikchr-date="20250321215505"><path d="M258.48,38.16L186.48,38.16" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><path d="M78.48,74.16L186.48,74.16L186.48,2.16L78.48,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="132.48" y="28.08" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">Hello,</text><text x="132.48" y="48.24" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">World!</text><polygon points="6.48,38.16 18,33.84 18,42.48" style="fill:rgb(0,0,0)"></polygon><path d="M78.48,38.16L12.24,38.16" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path></svg>
</div>
<p>Or to “up”:</p>
<div class="container_pikchr inline-svg unnamed-chunk-10" style="text-align:center;">
<svg style="width:112.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-10" viewbox="0 0 112.32 224.64" data-pikchr-date="20250321215505"><path d="M56.16,222.48L56.16,150.48" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><path d="M2.16,150.48L110.16,150.48L110.16,78.48L2.16,78.48Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="56.16" y="104.4" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">Hello,</text><text x="56.16" y="124.56" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">World!</text><polygon points="56.16,6.48 60.48,18 51.84,18" style="fill:rgb(0,0,0)"></polygon><path d="M56.16,78.48L56.16,12.24" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path></svg>
</div>
<p>It is common to stack line objects (lines, arrows, splines) against
block objects (boxes, circles, ovals, etc.), but this is not required.
You can stack a bunch of block objects together. For example:</p>
<pre class="pikchr"><code><span>    <span class="va">box</span>; <span class="va">circle</span>; <span class="va">cylinder</span></span></code></pre>
<p>Yields:</p>
<div class="container_pikchr inline-svg unnamed-chunk-12" style="text-align:center;">
<svg style="width:292.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-12" viewbox="0 0 292.32 76.32" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="146.16" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><path d="M182.16,12.96L182.16,63.36A54 10.8 0 0 0 290.16 63.36L290.16,12.96A54 10.8 0 0 0 182.16 12.96A54 10.8 0 0 0 290.16 12.96" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path></svg>
</div>
<p>More often, you want to put space in between the block objects. The
special “move” object exists for that purpose. Consider:</p>
<pre class="pikchr"><code><span>    <span class="va">box</span>; <span class="va">move</span>; <span class="va">circle</span>; <span class="va">move</span>; <span class="va">cylinder</span></span></code></pre>
<p>This script creates the same three block objects but with whitespace
in between them:</p>
<div class="container_pikchr inline-svg unnamed-chunk-14" style="text-align:center;">
<svg style="width:436.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-14" viewbox="0 0 436.32 76.32" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="218.16" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><path d="M326.16,12.96L326.16,63.36A54 10.8 0 0 0 434.16 63.36L434.16,12.96A54 10.8 0 0 0 326.16 12.96A54 10.8 0 0 0 434.16 12.96" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path></svg>
</div>
<p>Implementation note: a “move” is really just an invisible
“<code>line</code>,” which is why the following script generates the
same output as the previous. (<a href="https://pikchr.org/home/pikchrshow?content=box;line%20invisible;circle;line%20invisible;cylinder" class="external-link">Try
it!</a>)</p>
<pre class="pikchr"><code>    box; line invisible; circle; line invisible; cylinder</code></pre>
</div>
<div class="section level2">
<h2 id="controlling-layout-using-attributes">Controlling Layout Using Attributes <a id="attributes"></a><a class="anchor" aria-label="anchor" href="#controlling-layout-using-attributes"></a>
</h2>
<p>The automatic stacking of objects is convenient in many cases, but
most diagrams will want some objects placed somewhere other than
immediately adjacent to their predecessor. For that reason, layout
attributes are provided that allow precise placement of objects.</p>
<p>To see how this works, consider the previous example of a box,
circle, and cylinder separated by some space. Suppose we want to draw an
arrow that goes downward out of the box, then right, then up into the
cylinder. The complete script might look something like this:</p>
<pre class="pikchr"><code>    box; move; circle; move; cylinder
    arrow from first box.s \
          down 1cm \
          then right until even with first cylinder \
          then to first cylinder.s</code></pre>
<p>This script results in the following diagram:</p>
<div class="container_pikchr inline-svg unnamed-chunk-17" style="text-align:center;">
<svg style="width:436.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-17" viewbox="0 0 436.32 133.013" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="218.16" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><path d="M326.16,12.96L326.16,63.36A54 10.8 0 0 0 434.16 63.36L434.16,12.96A54 10.8 0 0 0 326.16 12.96A54 10.8 0 0 0 434.16 12.96" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><polygon points="380.16,74.16 384.48,85.68 375.84,85.68" style="fill:rgb(0,0,0)"></polygon><path d="M56.16,74.16L56.16,130.853L380.16,130.853L380.16,79.92" style="fill:none;stroke-width:2.16;stroke-linejoin:round;stroke:rgb(0,0,0);"></path></svg>
</div>
<p>That is indeed the image we want, but there are a lot of words on
that “arrow” statement! Don’t panic, though. It’s actually pretty
simple. We’ll take it apart and explain it piece by piece.</p>
<p>First note that the “arrow” statement is broken up into four separate
lines of text, with a “<code>\</code>” at the end of the first three
lines to prevent the subsequent new-line from prematurely closing the
statement. Splitting up the arrow into separate lines this way is purely
for human readability. If you are more comfortable putting the whole
statement on one line, that is fine too. Pikchr doesn’t care. Just be
sure to remember the backslashes if you do split lines!</p>
<p>The attributes on the “arrow” statement describe the path taken by
the arrow. The first attribute is “<code>from first box.s</code>”. This
“from” attribute specifies where the arrow starts. In this case, it
starts at the “s” (or “south”) anchor point of the “first box”. The
“first box” part is probably self explanatory. (You can also write it as
“1st box” instead of “first box”, and in fact legacy-PIC requires the
use of “1st” instead of “first”.) But what is the “.s” part?</p>
<p>Every block object has eight anchor points on its perimeter that are
named for compass points, like this:</p>
<div class="container_pikchr inline-svg unnamed-chunk-18" style="text-align:center;">
<svg style="width:609.984;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-18" viewbox="0 0 609.984 116.64" data-pikchr-date="20250321215505"><path d="M37.0656,94.32L145.066,94.32L145.066,22.32L37.0656,22.32Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="37.0656" cy="22.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text lengthadjust="spacingAndGlyphs" x="37.0656" y="12.24" text-anchor="end" fill="rgb(255,0,0)" dominant-baseline="central">.nw </text><circle cx="37.0656" cy="58.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="37.0656" y="58.32" text-anchor="end" fill="rgb(255,0,0)" dominant-baseline="central">.w </text><circle cx="37.0656" cy="94.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="37.0656" y="104.4" text-anchor="end" fill="rgb(255,0,0)" dominant-baseline="central">.sw </text><circle cx="91.0656" cy="94.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="91.0656" y="104.4" text-anchor="middle" fill="rgb(255,0,0)" dominant-baseline="central">.s</text><circle cx="145.066" cy="94.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="145.066" y="104.4" text-anchor="start" fill="rgb(255,0,0)" dominant-baseline="central"> .se</text><circle cx="145.066" cy="58.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="145.066" y="58.32" text-anchor="start" fill="rgb(255,0,0)" dominant-baseline="central"> .e</text><circle cx="145.066" cy="22.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="145.066" y="12.24" text-anchor="start" fill="rgb(255,0,0)" dominant-baseline="central"> .ne</text><circle cx="91.0656" cy="22.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="91.0656" y="12.24" text-anchor="middle" fill="rgb(255,0,0)" dominant-baseline="central">.n</text><circle cx="91.0656" cy="58.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="91.0656" y="58.32" text-anchor="start" fill="rgb(255,0,0)" dominant-baseline="central"> .c</text><circle cx="307.066" cy="58.32" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><circle cx="281.61" cy="32.8642" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="281.61" y="22.7842" text-anchor="end" fill="rgb(255,0,0)" dominant-baseline="central">.nw </text><circle cx="271.066" cy="58.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="271.066" y="58.32" text-anchor="end" fill="rgb(255,0,0)" dominant-baseline="central">.w </text><circle cx="281.61" cy="83.7758" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="281.61" y="93.8558" text-anchor="end" fill="rgb(255,0,0)" dominant-baseline="central">.sw </text><circle cx="307.066" cy="94.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="307.066" y="104.4" text-anchor="middle" fill="rgb(255,0,0)" dominant-baseline="central">.s</text><circle cx="332.521" cy="83.7758" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="332.521" y="93.8558" text-anchor="start" fill="rgb(255,0,0)" dominant-baseline="central"> .se</text><circle cx="343.066" cy="58.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="343.066" y="58.32" text-anchor="start" fill="rgb(255,0,0)" dominant-baseline="central"> .e</text><circle cx="332.521" cy="32.8642" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="332.521" y="22.7842" text-anchor="start" fill="rgb(255,0,0)" dominant-baseline="central"> .ne</text><circle cx="307.066" cy="22.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="307.066" y="12.24" text-anchor="middle" fill="rgb(255,0,0)" dominant-baseline="central">.n</text><circle cx="307.066" cy="58.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="307.066" y="58.32" text-anchor="start" fill="rgb(255,0,0)" dominant-baseline="central"> .c</text><path d="M469.066,33.12L469.066,83.52A54 10.8 0 0 0 577.066 83.52L577.066,33.12A54 10.8 0 0 0 469.066 33.12A54 10.8 0 0 0 577.066 33.12" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="469.066" cy="33.12" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="469.066" y="23.04" text-anchor="end" fill="rgb(255,0,0)" dominant-baseline="central">.nw </text><circle cx="469.066" cy="58.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="469.066" y="58.32" text-anchor="end" fill="rgb(255,0,0)" dominant-baseline="central">.w </text><circle cx="469.066" cy="83.52" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="469.066" y="93.6" text-anchor="end" fill="rgb(255,0,0)" dominant-baseline="central">.sw </text><circle cx="523.066" cy="94.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="523.066" y="104.4" text-anchor="middle" fill="rgb(255,0,0)" dominant-baseline="central">.s</text><circle cx="577.066" cy="83.52" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="577.066" y="93.6" text-anchor="start" fill="rgb(255,0,0)" dominant-baseline="central"> .se</text><circle cx="577.066" cy="58.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="577.066" y="58.32" text-anchor="start" fill="rgb(255,0,0)" dominant-baseline="central"> .e</text><circle cx="577.066" cy="33.12" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="577.066" y="23.04" text-anchor="start" fill="rgb(255,0,0)" dominant-baseline="central"> .ne</text><circle cx="523.066" cy="22.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="523.066" y="12.24" text-anchor="middle" fill="rgb(255,0,0)" dominant-baseline="central">.n</text><circle cx="523.066" cy="58.32" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><text x="523.066" y="58.32" text-anchor="start" fill="rgb(255,0,0)" dominant-baseline="central"> .c</text></svg>
</div>
<p>As you can see, there is also a ninth point in the middle called
“.c”. Every block object has these anchor points; you can refer to them
when positioning the object itself, or when positioning other objects
relative to the block object.</p>
<p>The next phrase on the “arrow” statement is “<code>down 1cm</code>”.
As you might guess, this phrase causes the arrow to move downward from
its previous position (its starting point) by 1 centimeter. This phrase
highlights a key enhancement of Pikchr over PIC, which did everything in
inches only. No units were allowed. Pikchr allows you to attach units to
measurements, as in this case where it is “1cm”. Internally, Pikchr
still keeps track of everything in inches for compatibility with PIC, so
the “1cm” token is really just an alternative spelling for the numeric
constant “0.39370078740157480316”, which is the inch-equivalent of 1
centimeter. Surely you agree that “1cm” is much easier to read and
write! Other units recognized by Pikchr are “px” for pixels, “pt” for
points, “pc” for picas, “mm” for millimeters, and of course “in” for
inches. Inches are assumed if no units are specified.</p>
<p>Back to our arrow: we have now established a path for the arrow down
1 centimeter from the “.s” anchor of the box. The next phrase is:
“<code>then right until even with first cylinder</code>”. You can
perhaps guess that this means that the arrow should continue to the
right until it is lined up below the first cylinder. You, the diagram
designer, don’t know (and don’t really want to know) how far apart the
box and the cylinder are, so you can’t tell it exactly how far to go.
This phrase is a convenient way of telling Pikchr to “make the line long
enough”.</p>
<p>Note that the “<code>first cylinder</code>” part of the “until even
with” phrase is actually an abbreviation for
“<code>first cylinder.c</code>” - the center of the cylinder. This is
what we want. You could also write “<code>first cylinder.s</code>” if
you want.</p>
<p>The “until even with” phrase is not found in the original version of
PIC. In that system, you would have to do some extra math to figure out
the distance for yourself, something like
“<code>then right (1st cylinder.s.x - 1st box.s.x)</code>”. We think the
“until even with” phrase is easier to use and understand.</p>
<p>The final phrase in the “arrow” statement is
“<code>then to first cylinder.s</code>”. This phrase tells the arrow to
go from wherever it is at the moment directly to the “.s” anchor of the
cylinder.</p>
</div>
<div class="section level2">
<h2 id="the-advantage-of-relative-layout">The Advantage Of Relative Layout <a id="relative"></a><a class="anchor" aria-label="anchor" href="#the-advantage-of-relative-layout"></a>
</h2>
<p>Notice that our sample diagram contains no coordinates and only one
hard-coded distance, the “down 1cm” bit in the “arrow” statement. The
script is written in such a way that the script-writer does not have to
do a lot of distance calculation. The layout compensates
automatically.</p>
<p>For example, suppose you come back to this script later and decide
you need to insert an ellipse in between the circle and the cylinder.
This is easily accomplished:</p>
<pre class="pikchr"><code>    box; move; circle; move; ellipse; move; cylinder
    arrow from first box.s \
          down 1cm \
          then right until even with first cylinder \
          then to first cylinder.s</code></pre>
<p>We simply add the ellipse (and an extra “move”) on the first line.
Even though the coordinate positions of the objects have adjusted, the
description of the arrow that connects the box to the cylinder is not
based on coordinates or absolute distances, so it does not have to
change at all. Pikchr compensates automatically:</p>
<div class="container_pikchr inline-svg unnamed-chunk-20" style="text-align:center;">
<svg style="width:616.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-20" viewbox="0 0 616.32 133.013" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="218.16" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><ellipse cx="380.16" cy="38.16" rx="54" ry="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></ellipse><path d="M506.16,12.96L506.16,63.36A54 10.8 0 0 0 614.16 63.36L614.16,12.96A54 10.8 0 0 0 506.16 12.96A54 10.8 0 0 0 614.16 12.96" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><polygon points="560.16,74.16 564.48,85.68 555.84,85.68" style="fill:rgb(0,0,0)"></polygon><path d="M56.16,74.16L56.16,130.853L560.16,130.853L560.16,79.92" style="fill:none;stroke-width:2.16;stroke-linejoin:round;stroke:rgb(0,0,0);"></path></svg>
</div>
<p>Both PIC and Pikchr allow you to specify hard-coded coordinates and
distances when laying out your diagram, but you are encouraged to avoid
that approach. Instead, place each new object you create relative to the
position of prior objects. Pikchr provides many mechanisms for
specifying the location of each object in terms of the locations of its
predecessors. With a little study of the syntax options available to you
(and discussed further below) you will be generating complex diagrams
using Pikchr in no time.</p>
</div>
<div class="section level2">
<h2 id="single-pass-design">Single-Pass Design <a id="single-pass"></a><a class="anchor" aria-label="anchor" href="#single-pass-design"></a>
</h2>
<p>Both Pikchr and PIC operate on a single-pass design. Objects can
refer to other objects that occur before them in the script, but not to
objects that occur later in the script. Any computations that go into
placing an object occur as the object definition is parsed. As soon as
the newline or semicolon that terminates the object definition is
reached, the size, location, and characteristics of the object are fixed
and cannot subsequently be altered. (One exception: sub-objects that are
part of a <code>[]</code>-container (discussed later) are placed
relative to the origin of the container. Their shape and locations
relative to each other are fixed, but their final absolute position is
not fixed until the <code>[]</code>-container itself is fixed.)</p>
<p>The single-pass approach contributes to the conceptual simplicity of
Pikchr (and PIC). There is no “solver” that has to work through forward
and backward layout constraints to find a solution. This simplicity of
design helps to keep Pikchr scripts easy to write and easy to
understand.</p>
</div>
<div class="section level2">
<h2 id="labeling-objects">Labeling Objects <a id="labeling"></a><a class="anchor" aria-label="anchor" href="#labeling-objects"></a>
</h2>
<p>The previous example used the phrases like “<code>first box</code>”
and “<code>first cylinder</code>” to refer to particular objects. There
are many variations on this naming scheme:</p>
<ul>
<li>“<code>previous</code>” ← the previous object regardless of its
class</li>
<li>“<code>last circle</code>” ← the most recently created circle
object</li>
<li>“<code>3rd last oval</code>” ← the antepenultimate oval object</li>
<li>“<code>17th ellipse</code>” ← the seventeenth ellipse object</li>
<li>…and so forth</li>
</ul>
<p>These relative and ordinal references work, but they can be fragile.
If you go back later and insert a new object in the stream, you can mess
up the counting. Or, for that matter, you might just miscount.</p>
<p>In a complex diagram, it often works better to assign symbolic names
to objects, which we call “labels” in Pikchr. A label begins with a
capital letter followed by some number of regular ASCII letters, digits
or underscores, followed by a colon. This must come immediately before
an object, without an intervening newline. Afterwards, the object can be
referred to by that label.</p>
<p>Consider how this simplifies our previous example:</p>
<pre class="pikchr"><code>    B1:  box; move;
         circle; move;
         ellipse; move;
    C1:  cylinder
         arrow from B1.s \
            down 1cm \
            then right until even with C1 \
            then to C1.s</code></pre>
<p>By giving symbolic names to the box (B1) and cylinder (C1), the arrow
path description is simplified. Furthermore, if the ellipse gets changed
into another cylinder, the arrow still refers to the correct
cylinder.</p>
<p>The indentation of the lines following each symbolic name above is
syntactically unimportant: it serves only to improve human readability.
Nevertheless, this is typical coding style for Pikchr and PIC before
it.</p>
</div>
<div class="section level2">
<h2 id="layout-of-block-objects">Layout Of Block Objects <a id="block-objects"></a><a class="anchor" aria-label="anchor" href="#layout-of-block-objects"></a>
</h2>
<p>For lines (and arrows and splines), you have to specify a path that
the line follows, a path that might involve multiple bends and turns.
Defining the location of block objects is easier: you just provide a
single location to place the object. Ideally, you should place the
object relative to some other object, of course.</p>
<p>Let’s say you have a box and you want to position a circle 2
centimeters to the right of that box. You simply use an
“<code>at</code>” attribute on the circle to tell it to position itself
2 cm to the right of the box:</p>
<pre class="pikchr"><code>  B1: box
      circle at 2cm right of B1</code></pre>
<p>The resulting diagram is:</p>
<div class="container_pikchr inline-svg unnamed-chunk-23" style="text-align:center;">
<svg style="width:207.706;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-23" viewbox="0 0 207.706 123.659" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="169.546" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><path d="M56.16,85.4986L56.16,121.499" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M169.546,85.4986L169.546,121.499" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="56.16,112.499 63.8784,109.604 63.8784,115.393" style="fill:rgb(128,128,128)"></polygon><polygon points="169.546,112.499 161.827,115.393 161.827,109.604" style="fill:rgb(128,128,128)"></polygon><path d="M60.0192,112.499L165.687,112.499" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text lengthadjust="spacingAndGlyphs" x="112.853" y="101.333" text-anchor="middle" fill="rgb(128,128,128)" dominant-baseline="central">2cm</text></svg>
</div>
<p>(We’ve added gray dimension lines purely for illustration. Click the
diagram <a href="#viewsrc">per the instructions above</a> to see that
they do not change the example, only add to it.)</p>
<p>The circle is positioned so that its <em>center</em> is 2 centimeters
to the right of the <em>center</em> of the box. If what you really
wanted is that the left (or west) side of the circle is 2 cm to the
right (or east) of the box, then just say so:</p>
<pre class="pikchr"><code>  B1: box
  C1: circle with .w at 2cm right of B1.e</code></pre>
<p>Normally an “<code>at</code>” clause will set the center of an
object, but if you add a “<code>with</code>” prefix you can specify any
other anchor point of the object to be the reference for positioning.
The Pikchr script above is saying “make the C1.w point be 2 cm right of
B1.e”. And we have:</p>
<div class="container_pikchr inline-svg unnamed-chunk-25" style="text-align:center;">
<svg style="width:297.706;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-25" viewbox="0 0 297.706 123.659" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="259.546" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><path d="M110.16,85.4986L110.16,121.499" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M223.546,85.4986L223.546,121.499" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="110.16,112.499 117.878,109.604 117.878,115.393" style="fill:rgb(128,128,128)"></polygon><polygon points="223.546,112.499 215.827,115.393 215.827,109.604" style="fill:rgb(128,128,128)"></polygon><path d="M114.019,112.499L219.687,112.499" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text lengthadjust="spacingAndGlyphs" x="166.853" y="101.333" text-anchor="middle" fill="rgb(128,128,128)" dominant-baseline="central">2cm</text></svg>
</div>
<p>That’s the whole story behind positioning block objects on a diagram.
You just add an attribute of the form:</p>
<blockquote>
<p><strong>with</strong> <em>reference-point</em> <strong>at</strong>
<em>position</em></p>
</blockquote>
<p>And Pikchr will place the specified reference-point of the object at
<em>position</em>. If you omit the “<code>with</code>” clause, the
center of the object (“<code>.c</code>”) is used as the
<em>reference-point</em>. The power of Pikchr comes from the fact that
“<em>position</em>” can be a rather complex expression. The previous
example used a relatively simple <em>position</em> of
“<code>2cm right of B1.e</code>”. That was sufficient for our simple
diagram. More complex diagrams can have more complex <em>position</em>
phrases.</p>
<div class="section level3">
<h3 id="automatic-layout-of-block-objects">Automatic Layout Of Block Objects
<a id="auto-layout-block"></a><a class="anchor" aria-label="anchor" href="#automatic-layout-of-block-objects"></a>
</h3>
<p>If you omit the “<code>at</code>” attribute from a block object, the
object is positioned as if you had used the following:</p>
<blockquote>
<p><code>with .start at previous.end</code></p>
</blockquote>
<p>Except, the very first object in the script has no “previous” and so
it is positioned using:</p>
<blockquote>
<p><code>with .c at (0,0)</code></p>
</blockquote>
<p>Let’s talk little more about the usual case:
“<code>with .start at previous.end</code>”. The “<code>previous</code>”
keyword means the previous object in the script. (You can also use the
keyword “<code>last</code>” for this purpose.) So we are positioning the
current object relative to the previous object. But what about the
“.start” and “.end”?</p>
<p>Remember that every object has 8 anchor points whose names correspond
to compass directions: “.n”, “.ne”, “.e”, “.se”, “.s”, “.sw”, “.w”, and
“.nw”, plus the ninth anchor, the center point “.c”. Every object also
has “.start” and “.end” anchor points, but their position varies
depending on the layout direction that is current when the object is
created.</p>
<table class="table  lightable-paper" style='font-family: "Arial Narrow", arial, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;">
Layout Direction
</th>
<th style="text-align:left;">
.start
</th>
<th style="text-align:left;">
.end
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
right
</td>
<td style="text-align:left;">
.w
</td>
<td style="text-align:left;">
.e
</td>
</tr>
<tr>
<td style="text-align:left;">
down
</td>
<td style="text-align:left;">
.n
</td>
<td style="text-align:left;">
.s
</td>
</tr>
<tr>
<td style="text-align:left;">
left
</td>
<td style="text-align:left;">
.e
</td>
<td style="text-align:left;">
.w
</td>
</tr>
<tr>
<td style="text-align:left;">
up
</td>
<td style="text-align:left;">
.s
</td>
<td style="text-align:left;">
.n
</td>
</tr>
</tbody>
</table>
<p>Recall the earlier example that consisted of three objects stacked
together:</p>
<pre class="pikchr"><code><span>    <span class="va">right</span>; <span class="va">box</span>; <span class="va">circle</span>; <span class="va">cylinder</span></span></code></pre>
<p>(I added a “<code>right</code>” at the beginning to make the layout
direction clear, but as “right” is the default layout direction, so it
doesn’t change anything.)</p>
<p>Armed with our new knowledge of how “<code>at</code>”-less block
objects are positioned, we can better understand what is going on. The
box is the first object. It gets positioned with its center at (0,0),
which we can show by putting a red dot at (0,0):</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>    right; box; circle; cylinder</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>    dot color red <span class="fu">at</span> (<span class="dv">0</span>,<span class="dv">0</span>)</span></code></pre></div>
<div class="container_pikchr inline-svg unnamed-chunk-28" style="text-align:center;">
<svg style="width:292.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-28" viewbox="0 0 292.32 76.32" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="146.16" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><path d="M182.16,12.96L182.16,63.36A54 10.8 0 0 0 290.16 63.36L290.16,12.96A54 10.8 0 0 0 182.16 12.96A54 10.8 0 0 0 290.16 12.96" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="56.16" cy="38.16" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle></svg>
</div>
<p>Because the layout direction is “right”, the start and end of the box
are the .w and .e anchor points. Prove this by putting more colored dots
at those points and rendering the result:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>    right; box; circle; cylinder</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>    dot color green at <span class="dv">1</span>st box.start</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>    dot color blue at <span class="dv">1</span>st box.end</span></code></pre></div>
<div class="container_pikchr inline-svg unnamed-chunk-29" style="text-align:center;">
<svg style="width:294.48;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-29" viewbox="0 0 294.48 76.32" data-pikchr-date="20250321215505"><path d="M4.32,74.16L112.32,74.16L112.32,2.16L4.32,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="148.32" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><path d="M184.32,12.96L184.32,63.36A54 10.8 0 0 0 292.32 63.36L292.32,12.96A54 10.8 0 0 0 184.32 12.96A54 10.8 0 0 0 292.32 12.96" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="4.32" cy="38.16" r="2.16" style="fill:rgb(0,128,0);stroke-width:2.16;stroke:rgb(0,128,0);"></circle><circle cx="112.32" cy="38.16" r="2.16" style="fill:rgb(0,0,255);stroke-width:2.16;stroke:rgb(0,0,255);"></circle></svg>
</div>
<p>Similarly, we can show that the .start and .end of the circle are its
.w and .e anchor points. (Add new color dots to prove this to yourself,
if you like.) And clearly, the .start of the circle is directly on top
of the .end of the box.</p>
<p>Now consider what happens if we change the layout direction after the
circle is created but before the cylinder is created:</p>
<pre class="pikchr"><code><span>    <span class="va">right</span>; <span class="va">box</span>; <span class="va">circle</span>; <span class="va">down</span>; <span class="va">cylinder</span></span></code></pre>
<p>This script works a little differently on Pikchr than it does on PIC.
The change in behavior is deliberate, because we feel that the Pikchr
approach is better. On PIC, the diagram above would be rendered like
this:</p>
<div class="container_pikchr inline-svg unnamed-chunk-31" style="text-align:center;">
<svg style="width:238.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-31" viewbox="0 0 238.32 112.32" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="146.16" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><path d="M128.16,48.96L128.16,99.36A54 10.8 0 0 0 236.16 99.36L236.16,48.96A54 10.8 0 0 0 128.16 48.96A54 10.8 0 0 0 236.16 48.96" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path></svg>
</div>
<p>But on Pikchr the placement of the cylinder is different:</p>
<div class="container_pikchr inline-svg unnamed-chunk-32" style="text-align:center;">
<svg style="width:202.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-32" viewbox="0 0 202.32 148.32" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="146.16" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><path d="M92.16,84.96L92.16,135.36A54 10.8 0 0 0 200.16 135.36L200.16,84.96A54 10.8 0 0 0 92.16 84.96A54 10.8 0 0 0 200.16 84.96" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path></svg>
</div>
<p>Let’s take apart what is happening here. In both systems, after the
“circle” object has been parsed and positioned, the .end of the circle
is the same as .e, because the layout direction is “right”. If we omit
the “down” and “cylinder” and draw a dot at the “.end” of circle to show
where it is, we can see this:</p>
<div class="container_pikchr inline-svg unnamed-chunk-33" style="text-align:center;">
<svg style="width:186.48;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-33" viewbox="0 0 186.48 76.32" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="146.16" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><circle cx="182.16" cy="38.16" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle></svg>
</div>
<p>The next statement is “down”. The “down” statement changes the layout
direction to “down” in both systems. In legacy PIC the .end of the
circle remains at the .e anchor. Then when the “cylinder” is positioned,
its “.start” is at .n because the layout direction is now “down”, so the
.n point of the cylinder is aligned to the .e point of the circle.</p>
<p>Pikchr works like PIC with one important change: when the “down”
statement is evaluated, Pikchr also moves the “.end” of the previous
object to a new location that is appropriate for the new direction. In
other words, the down command moves the .end of the circle from .e to
.s. You can see this by setting a red dot at the .end of the circle
<em>after</em> the “down” command:</p>
<div class="container_pikchr inline-svg unnamed-chunk-34" style="text-align:center;">
<svg style="width:184.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-34" viewbox="0 0 184.32 78.48" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="146.16" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><circle cx="146.16" cy="74.16" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle></svg>
</div>
<p>Or, we can “<code>print</code>” the coordinates of the .end of the
circle before and after the “down” command to see that they shift:</p>
<div class="container_pikchr inline-svg unnamed-chunk-35" style="text-align:center;">
<p>before: 0.875 , 0<br> after: 0.625 , -0.25<br><svg style="width:184.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-35" viewbox="0 0 184.32 76.32" data-pikchr-date="20250321215505"><path d="M2.16,74.16L110.16,74.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><circle cx="146.16" cy="38.16" r="36" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle></svg></p>
</div>
</div>
<div class="section level3">
<h3 id="adjusting-the-size-of-block-objects">Adjusting The Size Of Block Objects <a id="block-obj-size"></a><a class="anchor" aria-label="anchor" href="#adjusting-the-size-of-block-objects"></a>
</h3>
<p>The size of every block object is controlled by three parameters:</p>
<ul>
<li>
<code>width</code> (often abbreviated as <code>wid</code>)</li>
<li>
<code>height</code> (or <code>ht</code>)</li>
<li>
<code>radius</code> (or <code>rad</code>)</li>
</ul>
<p>There is also a fourth convenience parameter:</p>
<ul>
<li><code>diameter</code></li>
</ul>
<p>The <code>diameter</code> is always twice the radius. Setting the
<code>diameter</code> automatically changes the <code>radius</code> and
setting the <code>radius</code> automatically changes the
<code>diameter</code>.</p>
<p>Usually the meanings of these parameters are obvious.</p>
<div class="container_pikchr inline-svg unnamed-chunk-36" style="text-align:center;">
<svg style="width:204.68;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-36" viewbox="0 0 204.68 134.099" data-pikchr-date="20250321215505"><path d="M90.2002,78.48L198.2,78.48L198.2,6.48L90.2002,6.48Z" style="fill:none;stroke-width:3.24;stroke:rgb(0,0,0);"></path><path d="M78.8616,6.48L28.4616,6.48" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M78.8616,78.48L28.4616,78.48" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text lengthadjust="spacingAndGlyphs" x="34.7616" y="42.48" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">height</text><polygon points="34.7616,6.48 37.656,14.1984 31.8672,14.1984" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,27.36L34.7616,10.3392" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="34.7616,78.48 31.8672,70.7616 37.656,70.7616" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,57.6L34.7616,74.6208" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M90.2002,89.8186L90.2002,125.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M198.2,89.8186L198.2,125.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="144.2" y="116.819" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">width</text><polygon points="90.2002,116.819 97.9186,113.924 97.9186,119.713" style="fill:rgb(128,128,128)"></polygon><path d="M114.824,116.819L94.0594,116.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="198.2,116.819 190.482,119.713 190.482,113.924" style="fill:rgb(128,128,128)"></polygon><path d="M173.576,116.819L194.341,116.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path></svg>
</div>
<p>The <code>radius</code> parameter, however, sometimes has non-obvious
meanings. For example, on a box, the <code>radius</code> determines the
rounding of corners:</p>
<div class="container_pikchr inline-svg unnamed-chunk-37" style="text-align:center;">
<svg style="width:281.812;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-37" viewbox="0 0 281.812 134.099" data-pikchr-date="20250321215505"><path d="M111.8,78.48L176.6,78.48A21.6 21.6 0 0 0 198.2 56.88L198.2,28.08A21.6 21.6 0 0 0 176.6 6.48L111.8,6.48A21.6 21.6 0 0 0 90.2002 28.08L90.2002,56.88A21.6 21.6 0 0 0 111.8 78.48Z" style="fill:none;stroke-width:3.24;stroke:rgb(0,0,0);"></path><path d="M78.8616,6.48L28.4616,6.48" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M78.8616,78.48L28.4616,78.48" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text lengthadjust="spacingAndGlyphs" x="34.7616" y="42.48" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">height</text><polygon points="34.7616,6.48 37.656,14.1984 31.8672,14.1984" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,27.36L34.7616,10.3392" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="34.7616,78.48 31.8672,70.7616 37.656,70.7616" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,57.6L34.7616,74.6208" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M90.2002,89.8186L90.2002,125.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M198.2,89.8186L198.2,125.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="144.2" y="116.819" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">width</text><polygon points="90.2002,116.819 97.9186,113.924 97.9186,119.713" style="fill:rgb(128,128,128)"></polygon><path d="M114.824,116.819L94.0594,116.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="198.2,116.819 190.482,119.713 190.482,113.924" style="fill:rgb(128,128,128)"></polygon><path d="M173.576,116.819L194.341,116.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M209.539,78.48L259.939,78.48" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M209.539,56.88L259.939,56.88" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="247.339" y="67.68" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">radius</text><polygon points="247.339,78.48 250.233,86.1984 244.444,86.1984" style="fill:rgb(128,128,128)"></polygon><path d="M247.339,82.3392L247.339,100.08" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="247.339,56.88 244.444,49.1616 250.233,49.1616" style="fill:rgb(128,128,128)"></polygon><path d="M247.339,53.0208L247.339,35.28" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path></svg>
</div>
<p>For a <a href="https://pikchr.org/home/doc/trunk/doc/cylinderobj.md" class="external-link">cylinder
object</a> the <code>radius</code> determines the thickness of the end
caps:</p>
<div class="container_pikchr inline-svg unnamed-chunk-38" style="text-align:center;">
<svg style="width:281.812;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-38" viewbox="0 0 281.812 135.179" data-pikchr-date="20250321215505"><path d="M90.2002,23.76L90.2002,63.36A54 16.2 0 0 0 198.2 63.36L198.2,23.76A54 16.2 0 0 0 90.2002 23.76A54 16.2 0 0 0 198.2 23.76" style="fill:none;stroke-width:3.24;stroke:rgb(0,0,0);"></path><path d="M78.8616,7.56L28.4616,7.56" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M78.8616,79.56L28.4616,79.56" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text lengthadjust="spacingAndGlyphs" x="34.7616" y="43.56" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">height</text><polygon points="34.7616,7.56 37.656,15.2784 31.8672,15.2784" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,28.44L34.7616,11.4192" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="34.7616,79.56 31.8672,71.8416 37.656,71.8416" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,58.68L34.7616,75.7008" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M90.2002,90.8986L90.2002,126.899" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M198.2,90.8986L198.2,126.899" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="144.2" y="117.899" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">width</text><polygon points="90.2002,117.899 97.9186,115.004 97.9186,120.793" style="fill:rgb(128,128,128)"></polygon><path d="M114.824,117.899L94.0594,117.899" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="198.2,117.899 190.482,120.793 190.482,115.004" style="fill:rgb(128,128,128)"></polygon><path d="M173.576,117.899L194.341,117.899" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M209.539,23.76L259.939,23.76" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M209.539,39.96L259.939,39.96" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="247.339" y="31.86" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">radius</text><polygon points="247.339,39.96 250.233,47.6784 244.444,47.6784" style="fill:rgb(128,128,128)"></polygon><path d="M247.339,43.8192L247.339,61.56" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="247.339,23.76 244.444,16.0416 250.233,16.0416" style="fill:rgb(128,128,128)"></polygon><path d="M247.339,19.9008L247.339,2.16" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path></svg>
</div>
<p>For a <a href="https://pikchr.org/home/doc/trunk/doc/fileobj.md" class="external-link">file
object</a> the <code>radius</code> determines the size of the page
fold-over in the upper-right corner:</p>
<div class="container_pikchr inline-svg unnamed-chunk-39" style="text-align:center;">
<svg style="width:245.812;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-39" viewbox="0 0 245.812 187.379" data-pikchr-date="20250321215505"><path d="M90.2002,131.76L162.2,131.76L162.2,45.36L140.6,23.76L90.2002,23.76Z" style="fill:none;stroke-width:3.24;stroke:rgb(0,0,0);"></path><path d="M140.6,23.76L140.6,45.36L162.2,45.36" style="fill:none;stroke-width:3.24;stroke:rgb(0,0,0);"></path><path d="M78.8616,23.76L28.4616,23.76" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M78.8616,131.76L28.4616,131.76" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text lengthadjust="spacingAndGlyphs" x="34.7616" y="77.76" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">height</text><polygon points="34.7616,23.76 37.656,31.4784 31.8672,31.4784" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,62.64L34.7616,27.6192" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="34.7616,131.76 31.8672,124.042 37.656,124.042" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,92.88L34.7616,127.901" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M90.2002,143.099L90.2002,179.099" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M162.2,143.099L162.2,179.099" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="126.2" y="170.099" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">width</text><polygon points="90.2002,170.099 96.8242,167.204 96.8242,172.993" style="fill:rgb(128,128,128)"></polygon><path d="M96.8242,170.099L93.5122,170.099" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="162.2,170.099 155.576,172.993 155.576,167.204" style="fill:rgb(128,128,128)"></polygon><path d="M155.576,170.099L158.888,170.099" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M173.539,23.76L223.939,23.76" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M173.539,45.36L223.939,45.36" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="211.339" y="34.56" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">radius</text><polygon points="211.339,45.36 214.233,53.0784 208.444,53.0784" style="fill:rgb(128,128,128)"></polygon><path d="M211.339,49.2192L211.339,66.96" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="211.339,23.76 208.444,16.0416 214.233,16.0416" style="fill:rgb(128,128,128)"></polygon><path d="M211.339,19.9008L211.339,2.16" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path></svg>
</div>
<p>For a <a href="https://pikchr.org/home/doc/trunk/doc/circleobj.md" class="external-link">circle
object</a>, the width, height, and diameter are always the same, and the
radius is always half the diameter. Changing any parameter automatically
adjusts the other three.</p>
<div class="container_pikchr inline-svg unnamed-chunk-40" style="text-align:center;">
<svg style="width:273.051;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-40" viewbox="0 0 273.051 161.919" data-pikchr-date="20250321215505"><circle cx="133.4" cy="63.1005" r="43.2" style="fill:none;stroke-width:3.24;stroke:rgb(0,0,0);"></circle><path d="M78.8616,19.9005L28.4616,19.9005" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M78.8616,106.301L28.4616,106.301" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text lengthadjust="spacingAndGlyphs" x="34.7616" y="63.1005" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">height</text><polygon points="34.7616,19.9005 37.656,27.6189 31.8672,27.6189" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,47.9805L34.7616,23.7597" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="34.7616,106.301 31.8672,98.5821 37.656,98.5821" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,78.2205L34.7616,102.441" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M90.2002,117.639L90.2002,153.639" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M176.6,117.639L176.6,153.639" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="133.4" y="144.639" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">width</text><polygon points="90.2002,144.639 97.9186,141.745 97.9186,147.534" style="fill:rgb(128,128,128)"></polygon><path d="M104.024,144.639L94.0594,144.639" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="176.6,144.639 168.882,147.534 168.882,141.745" style="fill:rgb(128,128,128)"></polygon><path d="M162.776,144.639L172.741,144.639" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M187.939,106.301L238.339,106.301" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M187.939,63.1005L238.339,63.1005" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="225.739" y="84.7005" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">radius</text><polygon points="225.739,106.301 228.633,114.019 222.844,114.019" style="fill:rgb(128,128,128)"></polygon><path d="M225.739,110.16L225.739,127.901" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="225.739,63.1005 222.844,55.3821 228.633,55.3821" style="fill:rgb(128,128,128)"></polygon><path d="M225.739,59.2413L225.739,41.5005" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="102.853,93.6475 106.264,86.1431 110.358,90.2364" style="fill:rgb(128,128,128)"></polygon><polygon points="163.947,32.5535 160.536,40.0579 156.443,35.9646" style="fill:rgb(128,128,128)"></polygon><path d="M105.582,90.9187L161.218,35.2824" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M163.947,32.5535L179.221,17.28L190.021,17.28" style="fill:none;stroke-width:1.4472;stroke-linejoin:round;stroke:rgb(128,128,128);"></path><text x="190.021" y="17.28" text-anchor="start" fill="rgb(0,0,0)" dominant-baseline="central"> diameter</text></svg>
</div>
<p>Even though they are curvy objects, the <code>radius</code> (and
hence <code>diameter</code>) has no effect on <a href="https://pikchr.org/home/doc/trunk/doc/ellipseobj.md" class="external-link">ellipse</a>
and <a href="https://pikchr.org/home/doc/trunk/doc/ovalobj.md" class="external-link">oval</a>
objects. The size of those objects is determined purely by their width
and height:</p>
<div class="container_pikchr inline-svg unnamed-chunk-41" style="text-align:center;">
<svg style="width:204.68;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-41" viewbox="0 0 204.68 134.099" data-pikchr-date="20250321215505"><ellipse cx="144.2" cy="42.48" rx="54" ry="36" style="fill:none;stroke-width:3.24;stroke:rgb(0,0,0);"></ellipse><path d="M78.8616,6.48L28.4616,6.48" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M78.8616,78.48L28.4616,78.48" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text lengthadjust="spacingAndGlyphs" x="34.7616" y="42.48" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">height</text><polygon points="34.7616,6.48 37.656,14.1984 31.8672,14.1984" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,27.36L34.7616,10.3392" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="34.7616,78.48 31.8672,70.7616 37.656,70.7616" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,57.6L34.7616,74.6208" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M90.2002,89.8186L90.2002,125.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M198.2,89.8186L198.2,125.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="144.2" y="116.819" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">width</text><polygon points="90.2002,116.819 97.9186,113.924 97.9186,119.713" style="fill:rgb(128,128,128)"></polygon><path d="M114.824,116.819L94.0594,116.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="198.2,116.819 190.482,119.713 190.482,113.924" style="fill:rgb(128,128,128)"></polygon><path d="M173.576,116.819L194.341,116.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path></svg>
</div>
<div class="container_pikchr inline-svg unnamed-chunk-42" style="text-align:center;">
<svg style="width:492.68;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-42" viewbox="0 0 492.68 204.083" data-pikchr-date="20250321215505"><path d="M126.2,114.48L198.2,114.48A36 36 0 0 0 234.2 78.48A36 36 0 0 0 198.2 42.48L126.2,42.48A36 36 0 0 0 90.2002 78.48A36 36 0 0 0 126.2 114.48Z" style="fill:none;stroke-width:3.24;stroke:rgb(0,0,0);"></path><path d="M78.8616,42.48L28.4616,42.48" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M78.8616,114.48L28.4616,114.48" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text lengthadjust="spacingAndGlyphs" x="34.7616" y="78.48" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">height</text><polygon points="34.7616,42.48 37.656,50.1984 31.8672,50.1984" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,63.36L34.7616,46.3392" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="34.7616,114.48 31.8672,106.762 37.656,106.762" style="fill:rgb(128,128,128)"></polygon><path d="M34.7616,93.6L34.7616,110.621" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M90.2002,125.819L90.2002,161.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M234.2,125.819L234.2,161.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="162.2" y="152.819" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">width</text><polygon points="90.2002,152.819 97.9186,149.924 97.9186,155.713" style="fill:rgb(128,128,128)"></polygon><path d="M132.824,152.819L94.0594,152.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="234.2,152.819 226.482,155.713 226.482,149.924" style="fill:rgb(128,128,128)"></polygon><path d="M191.576,152.819L230.341,152.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M450.2,150.48A36 36 0 0 0 486.2 114.48L486.2,42.48A36 36 0 0 0 450.2 6.48A36 36 0 0 0 414.2 42.48L414.2,114.48A36 36 0 0 0 450.2 150.48Z" style="fill:none;stroke-width:3.24;stroke:rgb(0,0,0);"></path><path d="M402.862,6.48L352.462,6.48" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M402.862,150.48L352.462,150.48" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="358.762" y="78.48" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">height</text><polygon points="358.762,6.48 361.656,14.1984 355.867,14.1984" style="fill:rgb(128,128,128)"></polygon><path d="M358.762,63.36L358.762,10.3392" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="358.762,150.48 355.867,142.762 361.656,142.762" style="fill:rgb(128,128,128)"></polygon><path d="M358.762,93.6L358.762,146.621" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M414.2,161.819L414.2,197.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><path d="M486.2,161.819L486.2,197.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><text x="450.2" y="188.819" text-anchor="middle" fill="rgb(0,0,0)" font-size="80%" dominant-baseline="central">width</text><polygon points="414.2,188.819 421.919,185.924 421.919,191.713" style="fill:rgb(128,128,128)"></polygon><path d="M425.547,188.819L418.059,188.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path><polygon points="486.2,188.819 478.482,191.713 478.482,185.924" style="fill:rgb(128,128,128)"></polygon><path d="M474.853,188.819L482.341,188.819" style="fill:none;stroke-width:1.4472;stroke:rgb(128,128,128);"></path></svg>
</div>
<p>Notice that with an oval object, the semicircular end-cap is always
on the narrow end of the object. In the default configuration where the
height is less than the width, the semicircular end-caps are on the left
and right, but if the width and height are modified so that the width is
less than the height, then semicircles appear on the top and bottom
instead.</p>
<p>Although a <code>diamond</code> can in principle be rounded, same as
Pikchr allows with a <code>box</code>, the current implementation does
not respond to the radius parameter:</p>
<div class="container_pikchr inline-svg unnamed-chunk-43" style="text-align:center;">
<svg style="width:364.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-43" viewbox="0 0 364.32 166.32" data-pikchr-date="20250321215505"><path d="M2.16,83.16L74.16,164.16L146.16,83.16L74.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="74.16" y="73.08" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">Sharp</text><text x="74.16" y="93.24" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">diamond</text><path d="M218.16,83.16L290.16,164.16L362.16,83.16L290.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="290.16" y="63" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">“Rounded”</text><text x="290.16" y="83.16" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">diamond?</text><text x="290.16" y="103.32" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">Sorry; no.</text></svg>
</div>
<div class="section level4">
<h4 id="default-sizes">Default Sizes <a id="def-size"></a><a class="anchor" aria-label="anchor" href="#default-sizes"></a>
</h4>
<p>Block objects have default sizes, which are determined by variables.
For example, the width of a box is initialized with the value of the
<code>boxwid</code> variable, which defaults to <code>0.75in</code>.</p>
<p>It is common for Pikchr scripts to change these default at or near
the beginning of a script in order to adjust the default sizes of
objects defined within that script.</p>
</div>
<div class="section level4">
<h4 id="setting-sizes-using-attributes">Setting Sizes Using Attributes <a id="size-attr"></a><a class="anchor" aria-label="anchor" href="#setting-sizes-using-attributes"></a>
</h4>
<p>Use the “<code>width</code>” (or “<code>wid</code>”) attribute to
change the width of an object. The argument to this attribute can be an
expression — such as “<code>1cm</code>” or “<code>0.75*boxwid</code>” —
or it can be a percentage of the prior value, such as
“<code>75%</code>”. This also works for “<code>height</code>”,
“<code>radius</code>”, and “<code>diameter</code>”.</p>
</div>
<div class="section level4">
<h4 id="automatic-sizing-to-fit-text-annotations">Automatic Sizing To Fit Text Annotations
<a id="text-ann-size"></a><a class="anchor" aria-label="anchor" href="#automatic-sizing-to-fit-text-annotations"></a>
</h4>
<p>If a block object contains text annotations, the “<code>fit</code>”
attribute causes the width and height to be adjusted so that the object
neatly encloses that text. The “<code>fit</code>” attribute only
considers text that is previously defined for the object, or in other
words text annotations that occur to the left of the “<code>fit</code>”
keyword. The width and height can be adjusted further after the
“<code>fit</code>” keyword, for example to provide a larger margin
around the text. Click on the following script to see the difference
that the “<code>width 125%</code>” at the end of the second box
definition makes.</p>
<pre class="pikchr"><code>    down
    box "Auto-fit text annotation" "as is" fit
    move 50%
    box "Auto-fix text annotation" "with 125% width" fit width 125%</code></pre>
<p>If at the end of a block object definition, either the width or
height of the object is less than or equal to zero, then that dimension
is increased so as to enclose all text annotations on the object. Thus,
for example, you can make all of the boxes in your diagram auto-fit
around their text annotations by prefacing your script with something
like:</p>
<pre class="pikchr"><code>    boxwid = 0; boxht = 0;
    box "Hello";
    move
    box "A longer label" "with multiple lines" "of label text"</code></pre>
<p>For all of these auto-fit features, Pikchr needs to know the
dimensions of the text annotations after rendering. Unfortunately, that
information is not readily available, as Pikchr runs long before the
generated SVG reaches the web-browser in which it will be displayed.
Hence, Pikchr has to guess at the text size. Usually it does a good job
of this, but it can be a little off, especially for unusual (read:
“non-ASCII”) characters or if the CSS for the rendering environment sets
a non-standard font face or font size. To compensate, the
“<code>charwid</code>” and “<code>charht</code>” variables can be
adjusted or extra spaces can be added at the beginning or end of text
strings.</p>
<p>These auto-fit features are a new innovation for Pikchr and are not
available in other PIC family interpreters, as far as we are aware.</p>
</div>
</div>
<div class="section level3">
<h3 id="attributes-for-stroke-width-and-drawing-colors">Attributes For Stroke Width And Drawing Colors
<a id="stroke-attr"></a><a class="anchor" aria-label="anchor" href="#attributes-for-stroke-width-and-drawing-colors"></a>
</h3>
<p>Various attributes can be added to both block and line objects to
influence how the objects are drawn.</p>
<ul>
<li>
<code>thickness</code> <em>dimension</em>
</li>
<li><code>thick</code></li>
<li><code>thin</code></li>
<li>
<code>invisible</code> (or <code>invis</code>)</li>
<li>
<code>color</code> <em>color</em>
</li>
<li>
<code>fill</code> <em>color</em>
</li>
</ul>
<p>The “<code>thickness</code>”, “<code>thick</code>”,
“<code>thin</code>”, and “<code>invisible</code>” attributes control the
stroke width of the lines that construct an object. The default stroke
width for all objects is determined by the “<code>thickness</code>”
variable, which defaults to “<code>0.015in</code>”. The
“<code>thick</code>” and “<code>thin</code>” attributes increase or
decrease the stroke width by fixed percentages. These attributes can be
repeated to make the stroke width ever thicker or thinner, up to the
limit of the object’s dimensions where the stroke fills the entire
object. The “<code>invisble</code>” attribute simply sets the stroke
width to 0.</p>
<div class="container_pikchr inline-svg unnamed-chunk-46" style="text-align:center;">
<svg style="width:686.074;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-46" viewbox="0 0 686.074 34.56" data-pikchr-date="20250321215505"><path d="M2.16,32.4L73.1232,32.4L73.1232,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="37.6416" y="17.28" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">normal</text><path d="M145.123,32.4L189.936,32.4L189.936,2.16L145.123,2.16Z" style="fill:none;stroke-width:1.4472;stroke:rgb(0,0,0);"></path><text x="167.53" y="17.28" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">thin</text><path d="M261.936,32.4L315.504,32.4L315.504,2.16L261.936,2.16Z" style="fill:none;stroke-width:3.24;stroke:rgb(0,0,0);"></path><text x="288.72" y="17.28" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">thick</text><path d="M387.504,32.4L535.536,32.4L535.536,2.16L387.504,2.16Z" style="fill:none;stroke-width:7.29;stroke:rgb(0,0,0);"></path><text x="461.52" y="17.28" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">thick thick thick</text><text x="648.605" y="17.28" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">invisible</text></svg>
</div>
<p>Notice that “invisible” refers only to the object outline, not to the
whole object. You therefore cancel the “invisible” attribute with
“solid”, not “visible”:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>   boxwid <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>   boxht <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>   box <span class="st">"fully visible"</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>   box invisible color gray <span class="st">"outline invisible"</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>   box same solid <span class="st">"outline visible again"</span> fit</span></code></pre></div>
<div class="container_pikchr inline-svg unnamed-chunk-47" style="text-align:center;">
<svg style="width:439.776;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-47" viewbox="0 0 439.776 34.56" data-pikchr-date="20250321215505"><path d="M2.16,32.4L110.333,32.4L110.333,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="56.2464" y="17.28" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">fully visible</text><text x="183.254" y="17.28" text-anchor="middle" fill="rgb(128,128,128)" dominant-baseline="central">outline invisible</text><path d="M256.176,32.4L437.616,32.4L437.616,2.16L256.176,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(128,128,128);"></path><text x="346.896" y="17.28" text-anchor="middle" fill="rgb(128,128,128)" dominant-baseline="central">outline visible again</text></svg>
</div>
<p>The “<code>color</code>” and “<code>fill</code>” attributes change
the foreground and background colors of an object. Colors can be
expressed using any of <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value" class="external-link">the
148 standard CSS color names</a> such as “Bisque” or “AliceBlue” or
“LightGray”. Color names are not case sensitive, so “bisque”, “BISQUE”,
and “Bisque” all mean the same thing. Color names can also be expressed
as an integer which is interpreted as a 24-bit RGB value. It is
convenient to express numeric color values using hexadecimal notation.
“Bisque” is the same as “0xffe4c4”, which is the same as “16770244”.</p>
<div class="container_pikchr inline-svg unnamed-chunk-48" style="text-align:center;">
<svg style="width:367.546;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-48" viewbox="0 0 367.546 54.72" data-pikchr-date="20250321215505"><path d="M2.16,52.56L158.256,52.56L158.256,2.16L2.16,2.16Z" style="fill:rgb(255,228,196);stroke-width:2.16;stroke:rgb(95,158,160);"></path><text lengthadjust="spacingAndGlyphs" x="80.208" y="17.28" text-anchor="middle" fill="rgb(95,158,160)" dominant-baseline="central">Color: CadetBlue</text><text x="80.208" y="37.44" text-anchor="middle" fill="rgb(95,158,160)" dominant-baseline="central">Fill: Bisque</text><path d="M255.456,52.56L340.186,52.56A25.2 25.2 0 0 0 365.386 27.36A25.2 25.2 0 0 0 340.186 2.16L255.456,2.16A25.2 25.2 0 0 0 230.256 27.36A25.2 25.2 0 0 0 255.456 52.56Z" style="fill:rgb(65,105,225);stroke-width:2.16;stroke:rgb(255,255,255);"></path><text x="297.821" y="17.28" text-anchor="middle" fill="rgb(255,255,255)" dominant-baseline="central">Color: White</text><text x="297.821" y="37.44" text-anchor="middle" fill="rgb(255,255,255)" dominant-baseline="central">Fill: RoyalBlue</text></svg>
</div>
<p>Setting the “<code>fill</code>” to a negative number, to “None”, or
to “Off” makes the background transparent. That is the default.</p>
<p>The default foreground color is black.</p>
<div class="section level4">
<h4 id="filled-polygons">Filled Polygons <a id="filled-polys"></a><a class="anchor" aria-label="anchor" href="#filled-polygons"></a>
</h4>
<p>The “<code>fill</code>” attribute does not affect the rendering of
lines unless the route of the line is terminated by the
“<code>close</code>” attribute. The “<code>close</code>” keyword
converts the line into a polygon:</p>
<div class="container_pikchr inline-svg unnamed-chunk-49" style="text-align:center;">
<svg style="width:174.399;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-49" viewbox="0 0 174.399 151.613" data-pikchr-date="20250321215505"><path d="M87.1994,2.16L172.239,149.453L2.16,149.453Z" style="fill:rgb(0,96,0);stroke-width:2.16;stroke-linejoin:round;stroke:rgb(255,255,255);"></path><text lengthadjust="spacingAndGlyphs" x="87.1994" y="87.5063" text-anchor="middle" fill="rgb(255,255,255)" dominant-baseline="central">green</text><text x="87.1994" y="107.666" text-anchor="middle" fill="rgb(255,255,255)" dominant-baseline="central">triangle</text></svg>
</div>
<p>Polygons are not required to have a fill color. With the default fill
of “none,” you can use the “<code>close</code>” keyword to convert a
polygon into a line and leave the background transparent, but using
“<code>fill</code> <em>color</em>” together with “<code>close</code>” is
a common idiom.</p>
</div>
</div>
<div class="section level3">
<h3 id="text-annotations">Text Annotations <a id="text-ann"></a><a class="anchor" aria-label="anchor" href="#text-annotations"></a>
</h3>
<p>Every object can have up to five lines of text annotation. Each
annotation is a string literal attribute on the object definition. By
default, the annotations are displayed around the center of the object,
from top to bottom, in the order that they appear in the input
script.</p>
<div class="container_pikchr inline-svg unnamed-chunk-50" style="text-align:center;">
<svg style="width:360.115;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-50" viewbox="0 0 360.115 74.88" data-pikchr-date="20250321215505"><path d="M2.16,72.72L137.635,72.72L137.635,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="69.8976" y="17.28" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">box containing</text><text x="69.8976" y="37.44" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">three lines</text><text x="69.8976" y="57.6" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">of text</text><polygon points="353.635,37.44 342.115,41.76 342.115,33.12" style="fill:rgb(0,0,0)"></polygon><path d="M209.635,37.44L347.875,37.44" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="281.635" y="25.74" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">Labeled</text><text x="281.635" y="49.14" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">line</text></svg>
</div>
</div>
<div class="section level3">
<h3 id="text-attributes">Text Attributes <a id="text-attr"></a><a class="anchor" aria-label="anchor" href="#text-attributes"></a>
</h3>
<p>The layout and font style of the annotations can be modified using
keywords that appear after each string literal. The following modifiers
are supported:</p>
<ul>
<li><strong>above</strong></li>
<li><strong>aligned</strong></li>
<li><strong>below</strong></li>
<li><strong>big</strong></li>
<li><strong>bold</strong></li>
<li><strong>mono</strong></li>
<li><strong>monospace</strong></li>
<li><strong>center</strong></li>
<li><strong>italic</strong></li>
<li><strong>ljust</strong></li>
<li><strong>rjust</strong></li>
<li><strong>small</strong></li>
</ul>
<div class="section level4">
<h4 id="position-text-above-or-below-the-center-of-the-object">Position Text Above Or Below The Center Of The Object
<a id="text-pos"></a><a class="anchor" aria-label="anchor" href="#position-text-above-or-below-the-center-of-the-object"></a>
</h4>
<p>The “<code>above</code>” and “<code>below</code>” keywords control
the location of the text above or below the center point of the object
with which the text is associated. If there is just one text on the
object and the “<code>above</code>” and “<code>below</code>” keywords
are omitted, the text is placed directly over the center of the object.
This causes the text to appear in the middle of lines:</p>
<div class="container_pikchr inline-svg unnamed-chunk-51" style="text-align:center;">
<svg style="width:112.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-51" viewbox="0 0 112.32 24.48" data-pikchr-date="20250321215505"><path d="M2.16,12.24L110.16,12.24" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="56.16" y="12.24" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">on the line</text></svg>
</div>
<p>So, if there is just a single text label on a line, you probably want
to include either the “<code>above</code>” or “<code>below</code>”
keyword.</p>
<div class="container_pikchr inline-svg unnamed-chunk-52" style="text-align:center;">
<svg style="width:220.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-52" viewbox="0 0 220.32 47.88" data-pikchr-date="20250321215505"><path d="M2.16,23.94L74.16,23.94" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="38.16" y="12.24" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">above</text><path d="M146.16,23.94L218.16,23.94" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="182.16" y="35.64" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">below</text></svg>
</div>
<p>If there are two texts on the object, they straddle the center point
above and below, even without the use of the “<code>above</code>” and
“<code>below</code>” keywords:</p>
<div class="container_pikchr inline-svg unnamed-chunk-53" style="text-align:center;">
<svg style="width:220.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-53" viewbox="0 0 220.32 47.88" data-pikchr-date="20250321215505"><path d="M2.16,23.94L218.16,23.94" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="110.16" y="12.24" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">text without “above”</text><text x="110.16" y="35.64" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">text without “below”</text></svg>
</div>
<p>The “<code>above</code>” and “<code>below</code>” attributes do not
stack or accumulate. Each “<code>above</code>” or “<code>below</code>”
overrides any previous “<code>above</code>” or “<code>below</code>” for
the same text.</p>
<p>If there are multiple texts and all are marked “<code>above</code>”
or “<code>below</code>”, then all are placed above or below the center
point, in order of appearance.</p>
<div class="container_pikchr inline-svg unnamed-chunk-54" style="text-align:center;">
<svg style="width:364.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-54" viewbox="0 0 364.32 88.2" data-pikchr-date="20250321215505"><path d="M2.16,44.1L146.16,44.1" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="74.16" y="12.24" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">first above</text><text x="74.16" y="32.4" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">second above</text><path d="M218.16,44.1L362.16,44.1" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="290.16" y="55.8" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">first below</text><text x="290.16" y="75.96" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">second below</text></svg>
</div>
</div>
<div class="section level4">
<h4 id="justify-text-left-or-right">Justify Text Left Or Right <a id="text-just"></a><a class="anchor" aria-label="anchor" href="#justify-text-left-or-right"></a>
</h4>
<p>As the “<code>above</code>” and “<code>below</code>” keywords control
up and down positioning of the text, so the “<code>ljust</code>” and
“<code>rjust</code>” keywords control left and right positioning.</p>
<p>For a line, the “<code>ljust</code>” means that the left side of the
text is flush against the center point of the line, and
“<code>rjust</code>” means that the right side of the text is flush
against the center point of the line. (In the following diagram, the red
dot is at the center of the line.)</p>
<div class="container_pikchr inline-svg unnamed-chunk-55" style="text-align:center;">
<svg style="width:148.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-55" viewbox="0 0 148.32 47.88" data-pikchr-date="20250321215505"><path d="M2.16,23.94L146.16,23.94" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="74.16" y="12.24" text-anchor="start" fill="rgb(0,0,0)" dominant-baseline="central">ljust</text><text x="74.16" y="35.64" text-anchor="end" fill="rgb(0,0,0)" dominant-baseline="central">rjust</text><circle cx="74.16" cy="23.94" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle></svg>
</div>
<p>For a block object, “<code>ljust</code>” shifts the text to be left
justified against the left edge of the block (with a small margin) and
“<code>rjust</code>” puts the text against the right side of the object
(with the same margin).</p>
<div class="container_pikchr inline-svg unnamed-chunk-56" style="text-align:center;">
<svg style="width:370.31;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-56" viewbox="0 0 370.31 74.88" data-pikchr-date="20250321215505"><path d="M2.16,72.72L149.155,72.72L149.155,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="5.58" y="17.28" text-anchor="start" fill="rgb(0,0,0)" dominant-baseline="central">ljust</text><text x="5.58" y="37.44" text-anchor="start" fill="rgb(0,0,0)" dominant-baseline="central">longer line</text><text x="5.58" y="57.6" text-anchor="start" fill="rgb(0,0,0)" dominant-baseline="central">even longer line</text><path d="M221.155,72.72L368.15,72.72L368.15,2.16L221.155,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="364.73" y="17.28" text-anchor="end" fill="rgb(0,0,0)" dominant-baseline="central">rjust</text><text x="364.73" y="37.44" text-anchor="end" fill="rgb(0,0,0)" dominant-baseline="central">longer line</text><text x="364.73" y="57.6" text-anchor="end" fill="rgb(0,0,0)" dominant-baseline="central">even longer line</text></svg>
</div>
<p>The behavior of “<code>ljust</code>” and “<code>rjust</code>” for
block objects in Pikchr differs from legacy PIC. In PIC, text is always
justified around the center point, as in lines, but this means there is
no easy way to left justify multiple lines of text within a “box” or
“file”, so the behavior was changed for Pikchr.</p>
<p>Pikchr allows five separate text objects inside another object by
combining “<code>ljust</code>”, “<code>rjust</code>”, and the default
text centering:</p>
<div class="container_pikchr inline-svg unnamed-chunk-57" style="text-align:center;">
<svg style="width:328.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-57" viewbox="0 0 328.32 76.32" data-pikchr-date="20250321215505"><path d="M2.16,74.16L326.16,74.16L326.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="5.58" y="18" text-anchor="start" fill="rgb(0,0,0)" dominant-baseline="central">above-ljust</text><text x="322.74" y="18" text-anchor="end" fill="rgb(0,0,0)" dominant-baseline="central">above-rjust</text><text x="164.16" y="38.16" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">centered</text><text x="5.58" y="58.32" text-anchor="start" fill="rgb(0,0,0)" dominant-baseline="central">below-ljust</text><text x="322.74" y="58.32" text-anchor="end" fill="rgb(0,0,0)" dominant-baseline="central">below-rjust</text></svg>
</div>
</div>
<div class="section level4">
<h4 id="text-attribute-center">Text Attribute “center” <a id="text-center"></a><a class="anchor" aria-label="anchor" href="#text-attribute-center"></a>
</h4>
<p>The “<code>center</code>” attribute cancels all prior
“<code>above</code>”, “<code>below</code>”, “<code>ljust</code>”, and
“<code>rjust</code>” attributes for the current text object.</p>
</div>
<div class="section level4">
<h4 id="bold-and-italic-font-styles">Bold And Italic Font Styles <a id="font-style"></a><a class="anchor" aria-label="anchor" href="#bold-and-italic-font-styles"></a>
</h4>
<p>The “<code>bold</code>” and “<code>italic</code>” attributes cause
the text object to use a bold or italic font. Fonts can be both bold and
italic at the same time:</p>
<div class="container_pikchr inline-svg unnamed-chunk-58" style="text-align:center;">
<svg style="width:108.599;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-58" viewbox="0 0 108.599 74.88" data-pikchr-date="20250321215505"><path d="M2.16,72.72L106.439,72.72L106.439,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="54.2995" y="17.28" text-anchor="middle" font-weight="bold" fill="rgb(0,0,0)" dominant-baseline="central">bold</text><text x="54.2995" y="37.44" text-anchor="middle" font-style="italic" fill="rgb(0,0,0)" dominant-baseline="central">italic</text><text x="54.2995" y="57.6" text-anchor="middle" font-style="italic" font-weight="bold" fill="rgb(0,0,0)" dominant-baseline="central">bold-italic</text></svg>
</div>
</div>
<div class="section level4">
<h4 id="monospace-font-family">Monospace Font Family <a id="font-family"></a><a class="anchor" aria-label="anchor" href="#monospace-font-family"></a>
</h4>
<p>The “<code>mono</code>” or “<code>monospace</code>” attributes cause
the text object to use a monospace font.</p>
<div class="container_pikchr inline-svg unnamed-chunk-59" style="text-align:center;">
<svg style="width:100.858;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-59" viewbox="0 0 100.858 34.56" data-pikchr-date="20250321215505"><path d="M2.16,32.4L98.6976,32.4L98.6976,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="50.4288" y="17.28" text-anchor="middle" font-family="monospace" fill="rgb(0,0,0)" dominant-baseline="central">monospace</text></svg>
</div>
</div>
<div class="section level4">
<h4 id="aligned-text">Aligned Text <a id="text-align"></a><a class="anchor" aria-label="anchor" href="#aligned-text"></a>
</h4>
<p>The “<code>aligned</code>” attribute causes text associated with a
straight line to be rotated to align with that line:</p>
<div class="container_pikchr inline-svg unnamed-chunk-60" style="text-align:center;">
<svg style="width:194.78;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-60" viewbox="0 0 194.78 120.96" data-pikchr-date="20250321215505"><polygon points="56.16,8.12076 54.1412,20.2574 46.6588,15.9374" style="fill:rgb(0,0,0)"></polygon><path d="M2.16,101.652L53.28,13.1091" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="29.16" y="43.1861" text-anchor="middle" fill="rgb(0,0,0)" transform="rotate(-60 29.16,54.8861)" dominant-baseline="central">aligned</text><polygon points="131.607,114.48 125.352,103.885 133.861,102.385" style="fill:rgb(0,0,0)"></polygon><path d="M112.853,8.12076L130.607,108.808" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="122.23" y="49.6004" text-anchor="middle" fill="rgb(0,0,0)" transform="rotate(80 122.23,61.3004)" dominant-baseline="central">aligned</text><polygon points="188.3,6.48 192.62,18 183.98,18" style="fill:rgb(0,0,0)"></polygon><path d="M188.3,114.48L188.3,12.24" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="188.3" y="48.78" text-anchor="middle" fill="rgb(0,0,0)" transform="rotate(-90 188.3,60.48)" dominant-baseline="central">aligned</text></svg>
</div>
<p>To display rotated text not associated with a line, attach the text
to a line that is marked “<code>invisible</code>”</p>
<div class="container_pikchr inline-svg unnamed-chunk-61" style="text-align:center;">
<svg style="width:58.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-61" viewbox="0 0 58.32 148.32" data-pikchr-date="20250321215505"><path d="M2.16,146.16L56.16,146.16L56.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="29.16" y="74.16" text-anchor="middle" fill="rgb(0,0,0)" transform="rotate(-90 29.16,74.16)" dominant-baseline="central">rotated text</text></svg>
</div>
<p>Note that the direction of aligned text is the same as the direction
of the line itself, so if you draw a line from right to left, the
aligned text will appear upside down:</p>
<div class="container_pikchr inline-svg unnamed-chunk-62" style="text-align:center;">
<svg style="width:192.061;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-62" viewbox="0 0 192.061 67.3369" data-pikchr-date="20250321215505"><circle cx="25.1645" cy="25.1645" r="23.0045" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><text lengthadjust="spacingAndGlyphs" x="25.1645" y="25.1645" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">C1</text><circle cx="166.897" cy="42.1724" r="23.0045" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><text x="166.897" y="42.1724" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">C0</text><polygon points="48.0051,27.9054 59.9578,24.9887 58.9284,33.5672" style="fill:rgb(0,0,0)"></polygon><path d="M144.056,39.4315L53.7241,28.5916" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="96.0306" y="21.9684" text-anchor="middle" fill="rgb(0,0,0)" transform="rotate(-173.1572266 96.0306,33.6684)" dominant-baseline="central">aligned</text></svg>
</div>
<p>If you need aligned text on an arrow that goes from right to left,
and you do not want the text to be rendered upside-down, draw the arrow
from left to right and include the “<code>&lt;-</code>” attribute so
that the arrowhead is at the beginning rather than at the end:</p>
<div class="container_pikchr inline-svg unnamed-chunk-63" style="text-align:center;">
<svg style="width:192.061;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-63" viewbox="0 0 192.061 67.3369" data-pikchr-date="20250321215505"><circle cx="25.1645" cy="25.1645" r="23.0045" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><text lengthadjust="spacingAndGlyphs" x="25.1645" y="25.1645" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">C1</text><circle cx="166.897" cy="42.1724" r="23.0045" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></circle><text x="166.897" y="42.1724" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">C0</text><polygon points="48.0051,27.9054 59.9578,24.9887 58.9284,33.5672" style="fill:rgb(0,0,0)"></polygon><path d="M53.7241,28.5916L144.056,39.4315" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="96.0306" y="21.9684" text-anchor="middle" fill="rgb(0,0,0)" transform="rotate(6.842773413 96.0306,33.6684)" dominant-baseline="central">aligned</text></svg>
</div>
</div>
<div class="section level4">
<h4 id="adjusting-the-font-size">Adjusting The Font Size <a id="font-size"></a><a class="anchor" aria-label="anchor" href="#adjusting-the-font-size"></a>
</h4>
<p>The “<code>big</code>” and “<code>small</code>” attributes cause the
text to be a little larger or a little smaller, respectively. Two
“<code>big</code>” attributes cause the text to be larger still;
similarly, two “<code>small</code>” attributes make it
smaller-than-small. Text size does not increase or decrease beyond two
“<code>big</code>” or “<code>small</code>” keywords.</p>
<div class="container_pikchr inline-svg unnamed-chunk-64" style="text-align:center;">
<svg style="width:112.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-64" viewbox="0 0 112.32 148.32" data-pikchr-date="20250321215505"><path d="M2.16,146.16L110.16,146.16L110.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="56.16" y="41.5008" text-anchor="middle" fill="rgb(0,0,0)" font-size="64%" dominant-baseline="central">small small</text><text x="56.16" y="56.016" text-anchor="middle" fill="rgb(0,0,0)" font-size="80%" dominant-baseline="central">small</text><text x="56.16" y="74.16" text-anchor="middle" font-style="italic" fill="rgb(0,0,0)" dominant-baseline="central">(normal)</text><text x="56.16" y="96.84" text-anchor="middle" fill="rgb(0,0,0)" font-size="125%" dominant-baseline="central">big</text><text x="56.16" y="125.19" text-anchor="middle" fill="rgb(0,0,0)" font-size="156.25%" dominant-baseline="central">big big</text></svg>
</div>
<p>A “<code>big</code>” keyword cancels any prior “<code>small</code>”
keywords on the same text, and a “<code>small</code>” keyword cancels
any prior “<code>big</code>” keywords.</p>
</div>
</div>
<div class="section level3">
<h3 id="text-is-positioned-around-the-center-of-the-object">Text Is Positioned Around The Center Of The Object
<a id="text-center"></a><a class="anchor" aria-label="anchor" href="#text-is-positioned-around-the-center-of-the-object"></a>
</h3>
<p>The anchor point for text annotations is usually the center of the
bounding box for the whole object. This is intuitive for block objects
and straight lines. But for multi-segment lines, the text might not be
near the line itself. For example, in the following four-segment arrow,
the red box is the bounding box and the red dot shows the center of the
bounding box. The text label is aligned relative to the center of the
bounding box, which is not close to any part of the actual line.</p>
<div class="container_pikchr inline-svg unnamed-chunk-65" style="text-align:center;">
<svg style="width:224.073;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-65" viewbox="0 0 224.073 150.372" data-pikchr-date="20250321215505"><circle cx="109.877" cy="73.0261" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><polygon points="217.593,143.892 209.304,134.801 217.326,131.592" style="fill:rgb(0,0,0)"></polygon><path d="M2.16,87.1994L87.1994,2.16L143.892,30.5065L160.9,2.16L215.454,138.544" style="fill:none;stroke-width:2.16;stroke-linejoin:round;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="109.877" y="73.0261" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">text</text><path d="M2.16,143.892L217.593,143.892L217.593,2.16L2.16,2.16Z" style="fill:none;stroke-width:0.969624;stroke:rgb(255,0,0);"></path></svg>
</div>
<p>If you need to position text beside one specific segment of a
multi-segment line, consider creating a separate “<code>invis</code>”
line over top of that line segment and attaching the text to the “invis”
line instead. Here is the same arrow as before, but with the text
attached to a separate “invis” line that overlays the second segment of
the arrow:</p>
<div class="container_pikchr inline-svg unnamed-chunk-66" style="text-align:center;">
<svg style="width:224.073;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-66" viewbox="0 0 224.073 161.495" data-pikchr-date="20250321215505"><circle cx="109.877" cy="84.1487" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><polygon points="217.593,155.015 209.304,145.923 217.326,142.714" style="fill:rgb(0,0,0)"></polygon><path d="M2.16,98.322L87.1994,13.2826L143.892,41.6291L160.9,13.2826L215.454,149.667" style="fill:none;stroke-width:2.16;stroke-linejoin:round;stroke:rgb(0,0,0);"></path><path d="M2.16,155.015L217.593,155.015L217.593,13.2826L2.16,13.2826Z" style="fill:none;stroke-width:0.969624;stroke:rgb(255,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="115.546" y="37.5358" text-anchor="middle" fill="rgb(0,0,0)" transform="rotate(26.56505118 115.546,27.4558)" dominant-baseline="central">text</text></svg>
</div>
<p>The anchor point for text is <em>usually</em> the center of the
object, but in some cases, the anchor point might be fudged a little.
This happens, for example for cylinder objects:</p>
<div class="container_pikchr inline-svg unnamed-chunk-67" style="text-align:center;">
<svg style="width:112.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-67" viewbox="0 0 112.32 76.32" data-pikchr-date="20250321215505"><path d="M2.16,15.12L2.16,61.2A54 12.96 0 0 0 110.16 61.2L110.16,15.12A54 12.96 0 0 0 2.16 15.12A54 12.96 0 0 0 110.16 15.12" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="56.16" y="37.8" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">text in a</text><text x="56.16" y="57.96" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">cylinder</text><circle cx="56.16" cy="38.16" r="2.16" style="fill:rgb(255,0,0);stroke-width:2.16;stroke:rgb(255,0,0);"></circle><circle cx="56.16" cy="47.88" r="2.16" style="fill:rgb(0,0,255);stroke-width:2.16;stroke:rgb(0,0,255);"></circle></svg>
</div>
<p>The red dot is on the center of the cylinder and the blue dot shows
the anchor point for the text. The text is a little lower for cylinders
because that looks better. With out this adjustment of the text center
point, the cylinder text would look goofy:</p>
<div class="container_pikchr inline-svg unnamed-chunk-68" style="text-align:center;">
<svg style="width:112.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-68" viewbox="0 0 112.32 76.32" data-pikchr-date="20250321215505"><path d="M2.16,15.12L2.16,61.2A54 12.96 0 0 0 110.16 61.2L110.16,15.12A54 12.96 0 0 0 2.16 15.12A54 12.96 0 0 0 110.16 15.12" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="56.16" y="28.08" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">text in a</text><text x="56.16" y="48.24" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">cylinder</text></svg>
</div>
</div>
</div>
<div class="section level2">
<h2 id="containers">Containers<a class="anchor" aria-label="anchor" href="#containers"></a>
</h2>
<p>A “container” is a list of one or more objects contained within
“<code>[</code>…<code>]</code>”. A container is a collection of one or
more objects that looks like a single object to the remainder of the
script.</p>
<p>For example:</p>
<pre class="pikchr"><code>    A: [
      oval "Hello"
      arrow
      box "World" radius 4px
    ]
    Border: box thin width A.width+0.5in height A.height+0.5in at A.center</code></pre>
<p>The “A” container is composed of an oval, and arrow, and a box with
rounded corners. But to the subsequent “Border” box, the “A” container
appears to be a single object. The Border box can reference the overall
width and height and the center point of the A container in order to
size and position itself to enclose the container with a 0.25in
border:</p>
<div class="container_pikchr inline-svg unnamed-chunk-70" style="text-align:center;">
<svg style="width:400.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-70" viewbox="0 0 400.32 148.32" data-pikchr-date="20250321215505"><path d="M74.16,110.16L146.16,110.16A36 36 0 0 0 182.16 74.16A36 36 0 0 0 146.16 38.16L74.16,38.16A36 36 0 0 0 38.16 74.16A36 36 0 0 0 74.16 110.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="110.16" y="74.16" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">Hello</text><polygon points="254.16,74.16 242.64,78.48 242.64,69.84" style="fill:rgb(0,0,0)"></polygon><path d="M182.16,74.16L248.4,74.16" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><path d="M260.16,110.16L356.16,110.16A6 6 0 0 0 362.16 104.16L362.16,44.16A6 6 0 0 0 356.16 38.16L260.16,38.16A6 6 0 0 0 254.16 44.16L254.16,104.16A6 6 0 0 0 260.16 110.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="308.16" y="74.16" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">World</text><path d="M2.16,146.16L398.16,146.16L398.16,2.16L2.16,2.16Z" style="fill:none;stroke-width:1.4472;stroke:rgb(0,0,0);"></path></svg>
</div>
<p>A container is mostly useful for adding a border around a collection
of objects, as shown above, or adding a caption to a diagram. The
following diagram shows what a caption might look like. (Click to see
the Pikchr source text.)</p>
<div class="container_pikchr inline-svg unnamed-chunk-71" style="text-align:center;">
<svg style="width:328.32;height:;font-size:;font-family:inherit;margin:10px 0 10px 0;" xmlns="http://www.w3.org/2000/svg" class="pikchr inline-svg  unnamed-chunk-71" viewbox="0 0 328.32 120.96" data-pikchr-date="20250321215505"><path d="M38.16,74.16L110.16,74.16A36 36 0 0 0 146.16 38.16A36 36 0 0 0 110.16 2.16L38.16,2.16A36 36 0 0 0 2.16 38.16A36 36 0 0 0 38.16 74.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text lengthadjust="spacingAndGlyphs" x="74.16" y="38.16" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">Hello</text><polygon points="218.16,38.16 206.64,42.48 206.64,33.84" style="fill:rgb(0,0,0)"></polygon><path d="M146.16,38.16L212.4,38.16" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><path d="M224.16,74.16L320.16,74.16A6 6 0 0 0 326.16 68.16L326.16,8.16A6 6 0 0 0 320.16 2.16L224.16,2.16A6 6 0 0 0 218.16 8.16L218.16,68.16A6 6 0 0 0 224.16 74.16Z" style="fill:none;stroke-width:2.16;stroke:rgb(0,0,0);"></path><text x="272.16" y="38.16" text-anchor="middle" fill="rgb(0,0,0)" dominant-baseline="central">World</text><text x="164.16" y="103.68" text-anchor="middle" font-style="italic" fill="rgb(0,0,0)" dominant-baseline="central">Diagram Caption</text></svg>
</div>
<p>In legacy PIC, layout direction changes (the “up”, “down”, “left”,
and “right” commands) and variable definitions within a container only
affect subsequent statements within the same container. Once the
container closes, the prior direction and variable values are restored.
Pikchr does not work this way. In Pikchr, layout direction changes and
variable definitions that occur within a container continue to be in
effect after the container.</p>
</div>
<div class="section level2">
<h2 id="object-stacking-order">Object Stacking Order<a class="anchor" aria-label="anchor" href="#object-stacking-order"></a>
</h2>
<p>Objects are normally drawn in the order in which they are defined.
Thus objects that are toward the end of the script that overlap with
objects near the beginning will appear to be on top.</p>
<p>Sometimes it is desirable for a later object to appear to be behind
an early object. This is useful, for example, when using a box to form a
colored background for a group of prior objects. The <a href="https://pikchr.org/home/doc/trunk/doc/behind.md" class="external-link">“<code>behind</code>”
attribute</a> with a argument that is the label for any prior object can
be added to cause the object that holds the behind attribute to be drawn
before the object that the behind attribute references.</p>
</div>
<div class="section level2">
<h2 id="summary-and-conclusion">Summary And Conclusion<a class="anchor" aria-label="anchor" href="#summary-and-conclusion"></a>
</h2>
<p>Though based on the decades-old PIC language, Pikchr itself is a
relatively new system. However, it has already proven itself to be
amazingly useful for helping to illustrate concepts in technical
documentation written using Markdown.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p><strong>pikchr</strong> is part of an ecosystem of R packages for data analysis and computational document processing<br>developed at the <a href="https://monitoramento.sepe.pe.gov.br" class="external-link">Secretaria Executiva de Monitoramento Estratégico</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Developed by André Leite and Hugo Medeiros.</p>
</div>

  </div></footer>
</body>
</html>
